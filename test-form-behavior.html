<!DOCTYPE html>
<html>
<head>
    <title>Brevo Form Test</title>
</head>
<body>
    <h2>Test 1: Normal Form (WILL REDIRECT)</h2>
    <form method="POST" action="https://227ffc5e.sibforms.com/serve/MUIFAORX-sUxF1INXeVZ4MEHF-ZqHQq3Dp-NgpQnIa0ZVx4aM4kUizmV8L0Zjtwuc9IjCzNKbAKSdYmrp0rmAsoDex-umT2WtC8hSfft6fSybf-qhN3VmJFcOmiIunk7swUsf0Q4FpQYEsrXBMwxaEcunAcfAEZO9ymottARx6jsEnGnnCSIoVomhColDxPaIsnmFfW-U_WOSfjf">
        <input type="text" name="FIRSTNAME" placeholder="Name" required>
        <input type="email" name="EMAIL" placeholder="Email" required>
        <input type="hidden" name="locale" value="en">
        <button type="submit" style="background: red; color: white; padding: 10px;">
            ⚠️ WILL REDIRECT TO BREVO
        </button>
    </form>

    <hr>

    <h2>Test 2: JavaScript Intercepted Form (STAYS ON SITE)</h2>
    <form id="intercepted-form" method="POST" action="https://227ffc5e.sibforms.com/serve/MUIFAORX-sUxF1INXeVZ4MEHF-ZqHQq3Dp-NgpQnIa0ZVx4aM4kUizmV8L0Zjtwuc9IjCzNKbAKSdYmrp0rmAsoDex-umT2WtC8hSfft6fSybf-qhN3VmJFcOmiIunk7swUsf0Q4FpQYEsrXBMwxaEcunAcfAEZO9ymottARx6jsEnGnnCSIoVomhColDxPaIsnmFfW-U_WOSfjf">
        <input type="text" name="FIRSTNAME" placeholder="Name" required>
        <input type="email" name="EMAIL" placeholder="Email" required>
        <input type="hidden" name="locale" value="en">
        <button type="submit" style="background: green; color: white; padding: 10px;">
            ✅ STAYS ON THIS PAGE
        </button>
    </form>

    <div id="success-message" style="display: none; background: lightgreen; padding: 20px; margin: 20px 0;">
        <h3>Success! Form submitted without leaving this page!</h3>
        <p>This is exactly how your Picture Perfect TV Install form works now.</p>
    </div>

    <script>
        document.getElementById('intercepted-form').addEventListener('submit', async function(e) {
            e.preventDefault(); // This prevents the redirect!
            
            const formData = new FormData(e.target);
            
            try {
                // Submit to Brevo in background
                await fetch(e.target.action, {
                    method: 'POST',
                    body: formData,
                    mode: 'no-cors'
                });
                
                // Show success message instead of redirecting
                document.getElementById('success-message').style.display = 'block';
                e.target.reset();
                
            } catch (error) {
                // Even if there's an error, no-cors mode will still submit
                document.getElementById('success-message').style.display = 'block';
                e.target.reset();
            }
        });
    </script>
</body>
</html>